# 库存同步接口定义

## 1、活动查询接口

### 请求类型:

POST

### 功能描述：

获取商家在途活动信息

### 请求参数

无

### 响应参数

| 参数名称 | 参数说明 | 是否必须 | 数据类型 | 备注 |
| -------| -------| -------| -------| ---|
| code     | 响应编码 | 是       | Integer  |      |
| message  | 响应描述 | 是       | String   |      |
| success  | 是否成功 | 是       | Boolean  |      |
| data                            | 响应结果 | 否       | List |                |
| &emsp;&emsp;activityInfo | 活动信息 | 是       | List     | 活动基本信息   |
| &emsp;&emsp;&emsp;&emsp;activityId   | 活动ID       | 是       | Long     ||
| &emsp;&emsp;&emsp;&emsp;activityName   | 活动名称       | 是       | String     ||
| &emsp;&emsp;&emsp;&emsp;scheduleCode   | 档期编号       | 是       | String     |档期提报单编号|
| &emsp;&emsp;&emsp;&emsp;brandName     | 品牌名称    | 是    | String   |活动主品牌名称|
| &emsp;&emsp;&emsp;&emsp;startTime | 活动开始时间  | 是     | String |  |
| &emsp;&emsp;&emsp;&emsp;endTime   | 活动结束时间 | 是       | String |  |
| &emsp;&emsp;&emsp;&emsp;bdName   | 平台招商对接人 | 是       | String | |
| &emsp;&emsp;&emsp;&emsp;activityStatus   | 活动状态 | 是       | Integer | |
| &emsp;&emsp;&emsp;&emsp;displayStatus   | 活动上下架状态 | 是       | Integer | |

## 2、排期活动库存锁定

### 请求类型:

POST

### 功能描述：

提供批量或单个条码库存锁定（初始化）功能

### 请求参数

| 参数名称                 | 参数说明     | 是否必须 | 数据类型 | 备注           |
| -----------------------| -----------| -------| -------| -------------|
| activityId             | 活动ID | 是       | Long   | 活动ID   |
| skuInfo                  | 库存信息     | 是       | List     | 库存信息       |
| &emsp;&emsp;barcode      | 条码         | 是       | String   | 商品条码       |
| &emsp;&emsp;initStoreNum | 锁库库存数   | 是       | Integer  | 确定锁库的数量 |

### 响应参数

| 参数名称 | 参数说明 | 是否必须 | 数据类型 | 备注 |
| -------| -------| -------| -------| ---|
| code     | 响应编码 | 是       | Integer  |      |
| message  | 响应描述 | 是       | String   |      |
| success  | 是否成功 | 是       | Boolean  |      |
| data                            | 响应结果 | 否       |          |                |
| &emsp;&emsp;skuInfo             | 库存信息 | 是       | List     | 库存信息       |
| &emsp;&emsp;&emsp;&emsp;barcode | 条码     | 是       | String   | 商品条码       |
| &emsp;&emsp;&emsp;&emsp;initStoreNum | 初始库存数 | 是       | Integer  | 确定锁库的数量 |



## 3、活动商品剩余库存数查询

### 请求类型

POST

### 功能描述

获取活动中指定条码剩余库存数（单次请求数量不能超过100）

> 活动中库存会实时变更，查询结果仅供参考

### 请求参数

| 参数名称     | 参数说明     | 是否必须 | 数据类型 | 备注         |
| -----------| -----------| -------| -------| -----------|
| activityId | 活动ID | 是       | Long   | 活动ID |
| barcodes     | 条码        | 是       | List     | 条码列表     |

### 响应参数

| 参数名称                        | 参数说明 | 是否必须 | 数据类型 | 备注           |
| ------------------------------| -------| -------| -------| -------------|
| code                            | 响应编码 | 是       | Integer  |                |
| message                         | 响应描述 | 是       | String   |                |
| success                         | 是否成功 | 是       | Boolean  |                |
| data                            | 响应结果 | 否       |          |                |
| &emsp;&emsp;skuInfo             | 库存信息 | 是       | List     | 库存信息       |
| &emsp;&emsp;&emsp;&emsp;barcode | 条码     | 是       | String   | 商品条码       |
| &emsp;&emsp;&emsp;&emsp;initStoreNum | 初始库存数 | 是       | Integer  | 确定锁库的数量 |
| &emsp;&emsp;&emsp;&emsp;leftStoreNum | 剩余库存 | 是 | Integer | 当前剩余库存数 |



## 4、活动商品信息查询

### 请求类型

POST

### 功能描述

获取活动中商品和库存信息

### 请求参数

| 参数名称     | 参数说明     | 是否必须 | 数据类型 | 备注         |
| -----------| -----------| -------| -------| -----------|
| pageIndex | 起始页 | 是       | Integer   |  |
| pageSize | 分页大小 | 是       | Integer   |  |
| param | 过滤参数 | 是       |    |  |
| &emsp;&emsp;activityId | 活动ID | 是       | Long   | 活动ID |
| &emsp;&emsp;barcodes     | 条码         | 否       | List     | 商品条码列表 |
| &emsp;&emsp;includeSchedule| 是否包含档期活动信息| 否       | Boolean     | 为true时返回档期活动基本信息 |

### 响应参数

| 参数名称                              | 参数说明       | 是否必须 | 数据类型   | 备注         |
| ------------------------------------| -------------| -------| ---------| -----------|
| code                                  | 响应编码       | 是       | Integer    |              |
| message                               | 响应描述       | 是       | String     |              |
| success                               | 是否成功       | 是       | Boolean    |              |
| data                                  | 响应结果       | 否       |            |              |
| &emsp;&emsp;scheduleInfo| 档期活动信息       | 否       |       |     |
| &emsp;&emsp;&emsp;&emsp;activityId   | 活动ID       | 是       | Long     ||
| &emsp;&emsp;&emsp;&emsp;activityName   | 活动名称       | 是       | String     ||
| &emsp;&emsp;&emsp;&emsp;scheduleCode   | 档期编号       | 是       | String     |档期提报单编号|
| &emsp;&emsp;&emsp;&emsp;brandName     | 品牌名称    | 是    | String   |活动主品牌名称|
| &emsp;&emsp;&emsp;&emsp;startTime | 活动开始时间  | 是     | String |  |
| &emsp;&emsp;&emsp;&emsp;endTime   | 活动结束时间 | 是       | String |  |
| &emsp;&emsp;&emsp;&emsp;bdName   | 平台招商对接人 | 是       | String | |
| &emsp;&emsp;skuInfo                   | 库存信息       | 是       | List       | 库存信息     |
| &emsp;&emsp;&emsp;&emsp;productName   | 商品名称       | 是       | String     |              |
| &emsp;&emsp;&emsp;&emsp;productImage  | 商品图片地址   | 是       | String     |              |
| &emsp;&emsp;&emsp;&emsp;brandName     | 品牌名称       | 是       | String     |              |
| &emsp;&emsp;&emsp;&emsp;barcode       | 条码           | 是       | String     |              |
| &emsp;&emsp;&emsp;&emsp;merStyleNo    | 款号           | 是       | String     |              |
| &emsp;&emsp;&emsp;&emsp;styleNo    | 货号           | 是       | String     |款号+颜色编码              |
| &emsp;&emsp;&emsp;&emsp;categoryName  | 三级类目       | 是       | String     |              |
| &emsp;&emsp;&emsp;&emsp;color         | 颜色           | 是       | String     |              |
| &emsp;&emsp;&emsp;&emsp;spec          | 规格           | 是       | String     |              |
| &emsp;&emsp;&emsp;&emsp;defaultStoreNum | 预设库存数 | 是 | Integer | 商品库默认库存数，锁库前返回 |
| &emsp;&emsp;&emsp;&emsp;initStoreNum  | 初始库存       | 是       | Integer    | 初始锁定库存 |
| &emsp;&emsp;&emsp;&emsp;leftStoreNum  | 剩余库存       | 是       | Integer    | 当前剩余库存 |
| &emsp;&emsp;&emsp;&emsp;groupNum      | 组合数         | 是       | Integer    |              |
| &emsp;&emsp;&emsp;&emsp;displayStatus | 商品上下架状态 | 是       | Integer    |              |



## 5、活动商品库存数修改

### 请求类型：

POST

### 功能描述：

提供活动库存变更功能，在锁库后，可以在初始库存的基础上进行变更，（单次请求数量不能超过100）

> 减库存可能存在不够减的情况，系统会根据实际剩余库存尽可能减

### 请求参数

| 参数名称            | 参数说明 | 是否必须 | 数据类型 | 备注                        |
| ------------------| -------| -------| -------| --------------------------|
| requestId           | 请求唯一号   | 是       | String     | 做幂等校验 |
| activityId        | 活动ID   | 是       | Long     | 活动ID                  |
| skuInfo             | 库存信息 | 是       | List     | 库存信息                    |
| &emsp;&emsp;operType | 操作类型     | 是    | Integer   | 1:加库存,2:减库存,3:清空库存|
| &emsp;&emsp;barcode | 条码     | 是       | String   | 商品条码                    |
| &emsp;&emsp;number  | 库存数   | 是       | Integer  | 现有基础上追加/减少的库存数 |

### 响应参数

| 参数名称                               | 参数说明   | 是否必须 | 数据类型 | 备注             |
| -------------------------------------- | ---------- | -------- | -------- | ---------------- |
| code                                   | 响应编码   | 是       | Integer  |                  |
| message                                | 响应描述   | 是       | String   |                  |
| success                                | 是否成功   | 是       | Boolean  |                  |
| data                                   | 响应结果   | 否       |          |                  |
| &emsp;&emsp;skuInfo                    | 库存信息   | 是       | List     | 库存信息         |
| &emsp;&emsp;&emsp;&emsp;barcode        | 条码       | 是       | String   | 商品条码         |
| &emsp;&emsp;&emsp;&emsp;changeStoreNum | 库存变更数 | 是       | Integer  | 变更的库存数量   |
| &emsp;&emsp;&emsp;&emsp;leftStoreNum   | 库存数     | 是       | Integer  | 修改后的库存数量 |